<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Battleship</title>
  <link rel="stylesheet" href="main.css" />
  <script src="storage.js"></script>
  <style>
    .home-content {
      display: flex;
      flex-direction: column;
      justify-content: space-around;
      align-items: center;
    }
  </style>
  <template id="logged-in">
    <button>Play</button>
    <button onclick='logout()'>Logout</button>
  </template>
  <template id="not-logged-in">
    <button onclick="toLogin()">Login</button>
    <button onclick='toRegister()'>Register</button>
  </template>
  <script>
    function toLogin() {
      window.location.href = "auth/login.html"
    }
    function toRegister() {
      window.location.href = "auth/register.html"
    }
    function onLoad() {
      const creds = getCredentials();
      if (creds) {
        handleLoggedIn()
      } else {
        handleNotLoggedIn()
      }
    }
    function handleLoggedIn() {
      const home = document.querySelector("div.home-content")
      const loggedIn = document.getElementById("logged-in")
      home.innerHTML = ""
      home.appendChild(loggedIn.content.cloneNode(true))
    }

    function logout() {
      clearCredentials()
      handleNotLoggedIn()
    }

    function handleNotLoggedIn() {
      const home = document.querySelector("div.home-content")
      const notLoggedIn = document.getElementById("not-logged-in")
      home.innerHTML = ""
      home.appendChild(notLoggedIn.content.cloneNode(true))
    }
  </script>
</head>

<body onload="onLoad()">
  <main class="page">
    <div class="home-content"></div>
  </main>
</body>
<script>
</script>

</html>